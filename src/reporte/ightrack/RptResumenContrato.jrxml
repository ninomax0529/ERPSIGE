<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.3.1.final using JasperReports Library version 6.3.1  -->
<!-- 2023-08-18T11:46:27 -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="RptResumenContrato" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="a9888a13-34ed-4153-97f6-320e464a00e0">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="db_erp_sige"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w1" value="91"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w2" value="904"/>
	<property name="com.jaspersoft.studio.property.dataset.dialog.DatasetDialog.sash.w1" value="497"/>
	<property name="com.jaspersoft.studio.property.dataset.dialog.DatasetDialog.sash.w2" value="503"/>
	<parameter name="fecha_desde" class="java.util.Date"/>
	<parameter name="fecha_hasta" class="java.util.Date"/>
	<parameter name="url" class="java.lang.String"/>
	<parameter name="sql" class="java.lang.String"/>
	<queryString language="SQL">
		<![CDATA[SELECT 
ct.numero_de_contrato,ct.fecha,
c.codigo as cod_cliente,
ct.nombre_cliente,
dct.cantidad_frecuencia_de_pago ,
dct.cantidad as cant_gps,art.nombre as servicio,

dct.fecha_ultimo_pago_desde,fecha_ultimo_pago_hasta,
 
case when  dct.habilitado=true then 'Activo'  

else 'Suspendido' end as estado_un,
fecha_desde,fecha_hasta,  DATEDIFF(fecha_ultimo_pago_hasta,Now()) as  dias ,dct.total

from contrato_de_servicio ct
INNER JOIN detalle_contrato_de_servicio dct 
 on ct.codigo=dct.contrato_de_servicio
INNER JOIN cliente c on c.codigo=ct.cliente
INNER JOIN articulo art on art.codigo=dct.equipo

 and  ct.anulado=false

 where 

 art.tipo_articulo=3
 $P!{sql}]]>
	</queryString>
	<field name="numero_de_contrato" class="java.lang.String"/>
	<field name="fecha" class="java.sql.Date"/>
	<field name="cod_cliente" class="java.lang.Integer"/>
	<field name="nombre_cliente" class="java.lang.String"/>
	<field name="cantidad_frecuencia_de_pago" class="java.lang.Double"/>
	<field name="cant_gps" class="java.lang.Integer"/>
	<field name="servicio" class="java.lang.String"/>
	<field name="fecha_ultimo_pago_desde" class="java.sql.Date"/>
	<field name="fecha_ultimo_pago_hasta" class="java.sql.Date"/>
	<field name="estado_un" class="java.lang.String"/>
	<field name="fecha_desde" class="java.sql.Date"/>
	<field name="fecha_hasta" class="java.sql.Date"/>
	<field name="dias" class="java.lang.Long"/>
	<field name="total" class="java.lang.Double"/>
	<variable name="servicio1" class="java.lang.Integer" resetType="Group" resetGroup="nombre" calculation="Count">
		<variableExpression><![CDATA[$F{servicio}]]></variableExpression>
	</variable>
	<variable name="servicio2" class="java.lang.Integer" calculation="Count">
		<variableExpression><![CDATA[$F{servicio}]]></variableExpression>
	</variable>
	<variable name="total1" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{total}]]></variableExpression>
	</variable>
	<group name="nombre" keepTogether="true">
		<groupExpression><![CDATA[$F{nombre_cliente}]]></groupExpression>
		<groupHeader>
			<band height="35">
				<textField>
					<reportElement x="10" y="0" width="219" height="14" uuid="0091c466-3c76-4ba7-878a-b8cfb834ddfc">
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
					</reportElement>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{cod_cliente}+" ->"+$F{nombre_cliente}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="263" y="20" width="86" height="14" isPrintInFirstWholeBand="true" uuid="1531bbe2-6e15-49df-8d9f-3b9d323fd69f"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="9" isBold="true"/>
					</textElement>
					<text><![CDATA[Cantidad de Gps]]></text>
				</staticText>
				<staticText>
					<reportElement x="29" y="20" width="229" height="14" isPrintInFirstWholeBand="true" uuid="ffe1f45f-4e49-4138-b47e-9d083c0a44f4"/>
					<textElement verticalAlignment="Middle">
						<font size="9" isBold="true"/>
					</textElement>
					<text><![CDATA[Servicio]]></text>
				</staticText>
				<staticText>
					<reportElement x="351" y="20" width="67" height="14" isPrintInFirstWholeBand="true" uuid="fc1ea5c3-6a19-42d7-a28b-c048767e3a8e"/>
					<box rightPadding="5"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="9" isBold="true"/>
					</textElement>
					<text><![CDATA[Pago Desde]]></text>
				</staticText>
				<staticText>
					<reportElement x="418" y="20" width="78" height="14" isPrintInFirstWholeBand="true" uuid="2aae19ca-5cb6-429a-b350-2ffe43ad4782">
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
					</reportElement>
					<box rightPadding="5"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="9" isBold="true"/>
					</textElement>
					<text><![CDATA[Pago Hasta]]></text>
				</staticText>
				<staticText>
					<reportElement x="721" y="20" width="68" height="14" isPrintInFirstWholeBand="true" uuid="6d44df57-bae2-4e42-8687-bd3eed155c50">
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
					</reportElement>
					<box rightPadding="10"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="9" isBold="true"/>
					</textElement>
					<text><![CDATA[Estado]]></text>
				</staticText>
				<textField pattern="dd-MM-yyyy">
					<reportElement x="490" y="1" width="65" height="14" uuid="a69e274a-a8f2-45e2-9efa-fc11700c8d22"/>
					<box rightPadding="2"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="10" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{fecha}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="285" y="1" width="105" height="14" uuid="f76fb174-b553-4181-a7ff-876ee014d64b"/>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{numero_de_contrato}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="0" y="34" width="802" height="1" uuid="6202f8a9-a8cd-4845-a6b3-805b01580190"/>
					<graphicElement>
						<pen lineWidth="0.25"/>
					</graphicElement>
				</line>
				<staticText>
					<reportElement x="497" y="20" width="138" height="14" isPrintInFirstWholeBand="true" uuid="46088429-7154-4b77-9eb3-a7ab8865014d">
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
					</reportElement>
					<box rightPadding="10"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="9" isBold="true"/>
					</textElement>
					<text><![CDATA[Tiempo  por vencer o vencido]]></text>
				</staticText>
				<staticText>
					<reportElement x="643" y="20" width="74" height="14" isPrintInFirstWholeBand="true" uuid="cc19dde5-779f-437d-84da-cd908d550be4">
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
					</reportElement>
					<box rightPadding="10"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="9" isBold="true"/>
					</textElement>
					<text><![CDATA[Monto]]></text>
				</staticText>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="15">
				<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				<line>
					<reportElement x="0" y="0" width="802" height="1" uuid="ab2fbb76-1895-41be-85c4-a042888be6a8"/>
					<graphicElement>
						<pen lineWidth="0.25"/>
					</graphicElement>
				</line>
				<textField>
					<reportElement x="721" y="0" width="68" height="15" uuid="1d1c4b81-86d4-42fa-9912-f8df39a7f596"/>
					<box leftPadding="4"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="9" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{servicio1}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="519" y="0" width="198" height="14" uuid="8e7dc37e-1783-4f46-bdf0-5e5f1148c3df">
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
					</reportElement>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="9" isBold="true"/>
					</textElement>
					<text><![CDATA[Cantidad de servicios por Cliente :  ]]></text>
				</staticText>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="117" splitType="Stretch">
			<line>
				<reportElement x="0" y="115" width="802" height="1" uuid="d1e5e20f-c4db-4f2e-9e06-9ccc74104fb7"/>
				<graphicElement>
					<pen lineWidth="0.25"/>
				</graphicElement>
			</line>
			<staticText>
				<reportElement x="510" y="10" width="270" height="29" uuid="2d2e1c62-1eaa-4fe3-934c-52aa660429db">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Reporte  de Contrato]]></text>
			</staticText>
			<image scaleImage="FillFrame">
				<reportElement x="6" y="5" width="305" height="104" uuid="51d09ddb-80df-4598-8f75-2a7949af1aa3"/>
				<graphicElement fill="Solid"/>
				<imageExpression><![CDATA[$P{url}]]></imageExpression>
			</image>
			<line>
				<reportElement x="0" y="1" width="802" height="1" uuid="d5b12ef6-caaa-4367-8e34-12a1020a148a"/>
				<graphicElement>
					<pen lineWidth="0.25"/>
				</graphicElement>
			</line>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="21" splitType="Stretch">
			<rectangle>
				<reportElement x="6" y="2" width="796" height="16" backcolor="#CBFA91" uuid="17d32961-0fb7-4d31-ad80-a09bf879f09e"/>
			</rectangle>
			<staticText>
				<reportElement x="10" y="2" width="190" height="14" uuid="7025f676-6c59-4676-92c2-81f0e2751787">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Cliente]]></text>
			</staticText>
			<staticText>
				<reportElement x="285" y="2" width="105" height="14" uuid="8246de42-fffc-446c-a416-dceb235838a6">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Contrato]]></text>
			</staticText>
			<staticText>
				<reportElement x="490" y="2" width="65" height="14" uuid="10b36e8e-b374-4fc5-baa1-1e91b41e7841"/>
				<box rightPadding="2"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="20" width="802" height="1" uuid="57bff73b-5a1d-48d3-8370-78fdb5de6ac3"/>
				<graphicElement>
					<pen lineWidth="0.25"/>
				</graphicElement>
			</line>
		</band>
	</columnHeader>
	<detail>
		<band height="17" splitType="Stretch">
			<textField>
				<reportElement x="263" y="3" width="86" height="14" uuid="80f7010f-aae0-47c7-801d-d44582f75080">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cant_gps}]]></textFieldExpression>
			</textField>
			<textField pattern="dd-MM-yyyy">
				<reportElement x="351" y="3" width="67" height="14" uuid="9d209216-45fc-4d1b-8884-73ed5c44182a"/>
				<box rightPadding="5"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha_ultimo_pago_desde}==null ? $F{fecha_desde}:$F{fecha_ultimo_pago_desde}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="29" y="3" width="229" height="14" uuid="b921dec8-26f5-479c-b3c6-8838747de658">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cantidad_frecuencia_de_pago}+ "  "+$F{servicio}]]></textFieldExpression>
			</textField>
			<textField pattern="dd-MM-yyyy">
				<reportElement x="418" y="3" width="78" height="14" uuid="d9bdb509-1708-49fa-ba71-2a00d97587e7">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<box rightPadding="5"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha_ultimo_pago_hasta}==null ?$F{fecha_hasta}:$F{fecha_ultimo_pago_hasta}]]></textFieldExpression>
			</textField>
			<textField pattern="#,###.00#">
				<reportElement x="721" y="3" width="68" height="14" uuid="80b07c34-46cf-42e9-bc2c-edc1ba185697"/>
				<box rightPadding="10"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{estado_un}]]></textFieldExpression>
			</textField>
			<textField pattern="dd-MM-yyyy">
				<reportElement x="500" y="3" width="136" height="14" uuid="8d704bae-b447-4a63-b78b-239d87d912d0">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<box rightPadding="10"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{dias}==null ? " "
  :$F{dias}>=0  ?  " Dias para Vencer  "+($F{dias})  :  " Dias  vencido  "+($F{dias}*-1)]]></textFieldExpression>
			</textField>
			<textField pattern="#,###.00#">
				<reportElement x="645" y="3" width="72" height="14" uuid="ecdbfc7f-177a-4b53-90a3-1e0c2f40efca"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{total}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="18">
			<staticText>
				<reportElement x="1" y="3" width="129" height="12" uuid="2a90c8dc-24b9-48c5-ac57-6b2b8b93993d"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[ Fecha y Hora de Impresion :]]></text>
			</staticText>
			<textField pattern="dd-MM-yyyy h:mm a">
				<reportElement x="130" y="3" width="129" height="12" uuid="241d551c-2d70-44f5-afbd-074b6c7fcd78">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="0" y="17" width="802" height="1" uuid="7c1191e0-1b10-4fe4-8314-274c928d1979"/>
				<graphicElement>
					<pen lineWidth="0.25" lineStyle="Dashed"/>
				</graphicElement>
			</line>
			<line>
				<reportElement x="0" y="0" width="802" height="1" uuid="e160be8b-0458-48c4-82a3-ad6c7ca9ac16"/>
				<graphicElement>
					<pen lineWidth="0.25"/>
				</graphicElement>
			</line>
		</band>
	</pageFooter>
	<summary>
		<band height="40" splitType="Stretch">
			<line>
				<reportElement x="0" y="16" width="802" height="1" uuid="be7abf6a-9d1a-4ba3-ba49-297523cca9cc"/>
				<graphicElement>
					<pen lineWidth="0.25"/>
				</graphicElement>
			</line>
			<textField>
				<reportElement x="470" y="2" width="68" height="12" uuid="3c439f6c-02c7-4899-adc8-315e5e7aecfb"/>
				<box leftPadding="4"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{servicio2}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="361" y="2" width="109" height="12" uuid="5aa9fbe9-0d84-4a44-bdbe-aec82a979b3d">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Cantidad de  servicios ]]></text>
			</staticText>
			<staticText>
				<reportElement x="540" y="2" width="105" height="12" uuid="7716acf3-09f6-4e5b-8d38-57b840013d02">
					<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				</reportElement>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Monto Total ]]></text>
			</staticText>
			<textField pattern="#,###.00#">
				<reportElement x="649" y="2" width="68" height="12" uuid="39c29598-a8bc-4d0a-87b9-d30b2af4369a"/>
				<box leftPadding="4"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{total1}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
